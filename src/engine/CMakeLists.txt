include(cc_library)
include(cc_test)

cc_library(
  NAME 
    engine
  HDRS
    concurrent_queue.h
    executor.h
    worker.h
    engine.h
  SRCS
    executor.cpp 
    worker.cpp
    engine.cpp
  DEPS
    :request
    :torch_utils
    glog::glog
    Folly::folly
    absl::synchronization
    ${TORCH_LIBRARIES}
)

cc_test(
  NAME
    engine_test
  SRCS
    executor_test.cpp
  DEPS
    :engine
    absl::time
    GTest::gtest_main
)
