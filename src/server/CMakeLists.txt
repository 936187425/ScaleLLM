include(cc_binary)
include(cc_library)

cc_library(
  NAME 
    hf_model_downloader
  HDRS 
    hf_model_downloader.h
  SRCS 
    hf_model_downloader.cpp
  DEPS
    ${TORCH_LIBRARIES}
    Python::Python
)

cc_library(
  NAME 
    grpc_server
  HDRS 
    grpc_server.h
  SRCS 
    grpc_server.cpp
  DEPS
    grpc_proto::completion
)

cc_binary(
  NAME 
    simple
  SRCS 
    simple.cpp
  DEPS
    :torch_utils
    :llama
    :tokenizer
    :memory
    :hf_model_downloader
    ${TORCH_LIBRARIES}
    gflags::gflags
    glog::glog
)
